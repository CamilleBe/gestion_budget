{% extends 'base_modern.html.twig' %}

{% block title %}Nouveau type - Gestionnaire Budget{% endblock %}

{% block header %}
<div class="page-header">
    <h1 class="page-title">Nouveau Type de Transaction üè∑Ô∏è</h1>
    <p class="page-subtitle">D√©finir un nouveau type pour classer vos op√©rations financi√®res</p>
    <div class="d-flex gap-3 flex-wrap">
        <a href="{{ path('app_category_index') }}" class="btn-modern btn-info-modern">
            <i class="bi bi-arrow-left"></i>Retour aux types
        </a>
    </div>
</div>
{% endblock %}

{% block body %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="modern-card">
            <div class="card-header-modern">
                <h3 class="card-title-modern">
                    <i class="bi bi-plus-circle me-2"></i>D√©finir un type
                </h3>
            </div>

            {{ form_start(form, {'attr': {'class': 'form-modern'}}) }}
                <div class="form-group-modern">
                    {{ form_row(form.name, {
                        'attr': {'class': 'form-control-modern', 'placeholder': 'Ex: Salaire, Habitation, D√©placements...'},
                        'label_attr': {'class': 'form-label-modern'}
                    }) }}
                </div>
                
                <div class="form-group-modern">
                    {{ form_row(form.type, {
                        'attr': {'class': 'form-control-modern'},
                        'label_attr': {'class': 'form-label-modern'}
                    }) }}
                </div>
                
                <div class="alert" style="background: rgba(67, 233, 123, 0.1); color: #43e97b; border: 1px solid rgba(67, 233, 123, 0.2); border-radius: 12px; padding: 1rem;">
                    <i class="bi bi-lightbulb me-2"></i>
                    <strong>Conseil :</strong> Les types vous permettent de structurer et d'analyser vos finances. Optez pour des appellations claires et sp√©cifiques.
                </div>
                
                <div class="d-flex gap-3 justify-content-end">
                    <a href="{{ path('app_category_index') }}" class="btn btn-outline-secondary" style="border-radius: 12px; padding: 0.75rem 1.5rem;">
                        <i class="bi bi-arrow-left me-2"></i>Abandonner
                    </a>
                    <button type="submit" class="btn-modern">
                        <i class="bi bi-check-circle me-2"></i>Enregistrer le type
                    </button>
                </div>
            {{ form_end(form) }}
        </div>
        
        <!-- Propositions de types -->
        <div class="modern-card">
            <div class="card-header-modern">
                <h3 class="card-title-modern">
                    <i class="bi bi-lightbulb me-2"></i>Propositions de types
                </h3>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="suggestion-section">
                        <h5 class="suggestion-title text-success mb-3">
                            <i class="bi bi-arrow-up-circle me-2"></i>Entr√©es d'argent
                        </h5>
                        <div class="suggestion-grid">
                            <button type="button" class="suggestion-item income-suggestion" 
                                    data-name="Salaire" data-type="INCOME">
                                <i class="bi bi-briefcase"></i>
                                <span>Salaire</span>
                            </button>
                            <button type="button" class="suggestion-item income-suggestion" 
                                    data-name="Travail ind√©pendant" data-type="INCOME">
                                <i class="bi bi-laptop"></i>
                                <span>Travail ind√©pendant</span>
                            </button>
                            <button type="button" class="suggestion-item income-suggestion" 
                                    data-name="Bonus" data-type="INCOME">
                                <i class="bi bi-award"></i>
                                <span>Bonus</span>
                            </button>
                            <button type="button" class="suggestion-item income-suggestion" 
                                    data-name="Placements" data-type="INCOME">
                                <i class="bi bi-graph-up"></i>
                                <span>Placements</span>
                            </button>
                            <button type="button" class="suggestion-item income-suggestion" 
                                    data-name="Aides" data-type="INCOME">
                                <i class="bi bi-piggy-bank"></i>
                                <span>Aides</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="suggestion-section">
                        <h5 class="suggestion-title text-danger mb-3">
                            <i class="bi bi-arrow-down-circle me-2"></i>Sorties d'argent
                        </h5>
                        <div class="suggestion-grid">
                            <button type="button" class="suggestion-item expense-suggestion" 
                                    data-name="Habitation" data-type="EXPENSE">
                                <i class="bi bi-house"></i>
                                <span>Habitation</span>
                            </button>
                            <button type="button" class="suggestion-item expense-suggestion" 
                                    data-name="D√©placements" data-type="EXPENSE">
                                <i class="bi bi-car-front"></i>
                                <span>D√©placements</span>
                            </button>
                            <button type="button" class="suggestion-item expense-suggestion" 
                                    data-name="Nourriture" data-type="EXPENSE">
                                <i class="bi bi-cart"></i>
                                <span>Nourriture</span>
                            </button>
                            <button type="button" class="suggestion-item expense-suggestion" 
                                    data-name="M√©dical" data-type="EXPENSE">
                                <i class="bi bi-heart-pulse"></i>
                                <span>M√©dical</span>
                            </button>
                            <button type="button" class="suggestion-item expense-suggestion" 
                                    data-name="Divertissements" data-type="EXPENSE">
                                <i class="bi bi-controller"></i>
                                <span>Divertissements</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_styles %}
.suggestion-section {
    padding: 1rem;
}

.suggestion-title {
    font-weight: 600;
    display: flex;
    align-items: center;
}

.suggestion-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
}

.suggestion-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border: 2px solid transparent;
    border-radius: 12px;
    background: #f8f9fa;
    transition: all 0.3s ease;
    cursor: pointer;
    font-weight: 500;
}

.income-suggestion {
    background: rgba(40, 167, 69, 0.05);
    color: #28a745;
}

.income-suggestion:hover {
    background: rgba(40, 167, 69, 0.1);
    border-color: rgba(40, 167, 69, 0.3);
    transform: translateY(-2px);
}

.income-suggestion.selected {
    background: var(--success-gradient);
    color: white;
    border-color: #28a745;
}

.expense-suggestion {
    background: rgba(220, 53, 69, 0.05);
    color: #dc3545;
}

.expense-suggestion:hover {
    background: rgba(220, 53, 69, 0.1);
    border-color: rgba(220, 53, 69, 0.3);
    transform: translateY(-2px);
}

.expense-suggestion.selected {
    background: var(--warning-gradient);
    color: white;
    border-color: #dc3545;
}

.suggestion-item i {
    font-size: 1.1rem;
}

@media (max-width: 768px) {
    .suggestion-grid {
        grid-template-columns: 1fr;
    }
    
    .suggestion-item {
        padding: 0.5rem 0.75rem;
    }
}
{% endblock %}

{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const nameField = document.querySelector('#category_name');
    const typeField = document.querySelector('#category_type');
    const suggestions = document.querySelectorAll('.suggestion-item');
    
    suggestions.forEach(suggestion => {
        suggestion.addEventListener('click', function() {
            const name = this.dataset.name;
            const type = this.dataset.type;
            
            // Remplir les champs
            nameField.value = name;
            typeField.value = type;
            
            // Retirer la s√©lection pr√©c√©dente
            suggestions.forEach(s => s.classList.remove('selected'));
            
            // Ajouter la s√©lection actuelle
            this.classList.add('selected');
            
            // Animation
            this.style.transform = 'scale(1.05)';
            setTimeout(() => {
                this.style.transform = 'translateY(-2px)';
            }, 200);
        });
    });
    
    // Animation des champs de formulaire
    document.querySelectorAll('.form-control-modern').forEach(field => {
        field.addEventListener('focus', function() {
            this.parentElement.style.transform = 'translateY(-2px)';
            this.parentElement.style.transition = 'all 0.3s ease';
        });
        
        field.addEventListener('blur', function() {
            this.parentElement.style.transform = 'translateY(0)';
        });
    });
    
    // Validation en temps r√©el
    nameField.addEventListener('input', function() {
        const value = this.value.trim();
        const submitBtn = document.querySelector('button[type="submit"]');
        
        if (value.length >= 2) {
            submitBtn.disabled = false;
            submitBtn.style.opacity = '1';
        } else {
            submitBtn.disabled = true;
            submitBtn.style.opacity = '0.6';
        }
    });
});
</script>
{% endblock %} 